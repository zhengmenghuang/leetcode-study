<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<script>
  const s = "abcabcbb";
  const lengthOfLongestSubstring = function(s) {
    if(!s.length) return 0;
    let max = 1; // 最大长度
    let now = ''; // 当前无重复字串
    let left = 0; // 当前无重复字串的起始下标
    let loop = 0; // 循环次数
    let idx; // 当前字符所在now中的位置

    // 假如当前max大于当前未遍历的剩余字符时，则可跳出了
    // 例如 abccba 当运行到第二个c时，max = 3，left = 3 跳出
    // 后面不可能大于max，最多等于
    while(loop < s.length && max < s.length - left){
      idx = now.indexOf(s[loop]);
      if(idx >= 0){
        left += idx + 1;
      }
      now = s.slice(left, loop + 1);
      max = Math.max(now.length, max);
      loop++;
    }
    return max;
  };
  console.log(lengthOfLongestSubstring(s));
</script>
</body>
</html>
